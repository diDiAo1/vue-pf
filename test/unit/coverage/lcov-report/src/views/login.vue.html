<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src\views\login.vue</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">src/views/</a> login.vue
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">40.74% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>11/27</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">40.74% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>11/27</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">&lt;template&gt;
  &lt;div&gt;
    {{msg}}
    &lt;hr/&gt;
    &lt;div class="login" @keyup.enter="submitForm('userMes')"&gt;
      &lt;el-form :label-position="labelPosition" label-width="80px" :model="userMes" ref="userMes"&gt;
      
        &lt;el-form-item label="用户名" prop="userName" class=""&gt;
          &lt;el-input v-model="userMes.userName" placeholder="请输入用户名" auto-complete="off" &gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label="密码" prop="password"&gt;
          &lt;el-input type="password" v-model="userMes.password" placeholder="请输入密码"&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item label="验证码" prop="code"&gt;
          &lt;el-input type="text" class="checklog" v-model="userMes.code" auto-complete="off" placeholder="请输入验证码！"&gt;&lt;/el-input&gt;
          &lt;el-button type="info" class="right" @click="createCode()"&gt;{{checkPwd}}&lt;/el-button&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item style="text-align: center;"&gt;
          &lt;el-button type="primary" :plain="true" @click="submitForm('userMes')"  element-loading-text="拼命加载中"&gt;提交&lt;/el-button&gt;
          &lt;el-button @click="resetForm('userMes')"&gt;重置&lt;/el-button&gt;
        &lt;/el-form-item&gt;
      &lt;/el-form&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&nbsp;
&lt;script&gt;
  /* eslint-disable */
  export default {
    name: 'login',
    created() {
        this.createCode();
    },
    data() {
      var validateCheckpass = (rule, value, callback) =<span class="fstat-no" title="function not covered" >&gt; {</span>
        //alert("value:"+value+"||code:"+this.checkPwd);
<span class="cstat-no" title="statement not covered" >        if (value === '') {</span>
<span class="cstat-no" title="statement not covered" >          callback(new Error('请输入验证码！'))</span>;
        }els<span class="cstat-no" title="statement not covered" >e if(value.toUpperCase()!==this.checkPwd.toUpperCase()){</span>
<span class="cstat-no" title="statement not covered" >          callback(new Error('验证码错误，可点击重新获取'))</span>;
        }
        else {
<span class="cstat-no" title="statement not covered" >          callback()</span>;
        }
      };
      return {
        msg: '登录页面',
        labelPosition: 'center',
        //&lt;el-form :label-position="labelPosition" :rules="rulesLogin" label-width="80px" :model="userMes" ref="userMes"&gt;
      
        // rulesLogin: {
        //   userName: [{ required: true, message: '请输入用户名', trigger: 'blur' }],
        //   password: [{ required: true, message: '请输入密码', trigger: 'blur' }],
        //   code: [
        //     { validator: validateCheckpass, trigger: 'blur' }
        //   ]
        // },
        userMes: {
          userName: '',
          password: '',
          code: ''
        },
        checkPwd: ''
      }
    },
    methods: {
      resetForm(formName) {
<span class="cstat-no" title="statement not covered" >        this.$refs[formName].resetFields()</span>;
      },
      submitForm(formName) {
<span class="cstat-no" title="statement not covered" >        this.$refs[formName].validate((valid) =<span class="fstat-no" title="function not covered" >&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >          if (valid) {</span>
            // 密码加密功能
            //数据请求
<span class="cstat-no" title="statement not covered" >             this.login(</span>)
          } else {
            //alert("error!");
<span class="cstat-no" title="statement not covered" >            return false</span>;
          }
        });
      },
      createCode(){
        let code = "";
        //验证码的长度
        const codeLength = 4;
        //所有候选组成验证码的字符，当然也可以用中文的
        const selectChar = new Array(0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z');
        for (let i = 0; i &lt; codeLength; i++) {
          let charIndex = Math.floor(Math.random() * selectChar.length);
          code = code + selectChar[charIndex];
        }
        this.checkPwd = code;
      },
      login() {
        this.$store.dispatch('loginSystem',{password:this.userMes.password , loginName:this.userMes.userName })
          .then((res)=<span class="fstat-no" title="function not covered" >&gt; {</span>
<span class="cstat-no" title="statement not covered" >            console.log("this.$store.dispatch"+res</span>)
            // todo
<span class="cstat-no" title="statement not covered" >          if (res.status === 200) {</span>
<span class="cstat-no" title="statement not covered" >            this.savecookie('userName', this.userMes.userName, 1</span>)
<span class="cstat-no" title="statement not covered" >            console.log("login:"+this.userMes.userName</span>)
<span class="cstat-no" title="statement not covered" >            this.$router.push('/index/1/管理控制台/'+this.userMes.userName)</span>;
          }
          }, (err)=<span class="fstat-no" title="function not covered" >&gt; {</span>
<span class="cstat-no" title="statement not covered" >            console.warn(err</span>)
            //this.$router.push('/index/1/管理控制台/'+this.userMes.userName);
          // alert("用户名或密码有误！");
        })
      }
    }
  }
&lt;/script&gt;
&nbsp;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
  .login{
    width: 50%;
    text-align: center;
    margin: 10% 20%;
  }
  .checklog{
    width: 60%;
    float: left;
  }
  .right{
    width: 35%;
    padding-top: 10px;
    line-height: 15px;
    float: right;
  }
&lt;/style&gt;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed May 31 2017 10:49:08 GMT+0800 (中国标准时间)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
